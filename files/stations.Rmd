---
title: "Divvy Stations"
author: Matthew Parin
output: html_document
---

## About this file

This file is either a webpage generated from an R Markdown document,
or the original R Markdown file itself.

[R Markdown](http://r4ds.had.co.nz/r-markdown.html) combines
[Markdown](http://daringfireball.net/projects/markdown) with "chunks"
of R code. R Markdown notebooks can be easily rendered into various
formats (e.g., PDF, HTML) for creating sharable and reproducible
[narratives](https://www.oreilly.com/ideas/the-state-of-jupyter) of
your data analyses.

There are many benefits to documenting your data analyses in R
Markdown---we will not have time to explore all the benefits here.

## About the Divvy station data

After you launch R or RStudio, double-check that your working
directory is set to the "analysis" directory. For example, on my
MacBook Air the current working directory is

```{r, eval=TRUE}
getwd()
```

If it is not, see the [setup](setup.html) instructions for how to
change the working directory.

## Loading the Divvy station data

The R environment is where all *variables and functions* are stored
and accessed.

Immediately after launching R, your R environment will be empty.

```{r, eval=FALSE}
ls()
```

We will create a new variable called "stations" by running
function "read.csv", and assigning the result of "read.csv" to
"stations":

```{r, eval=FALSE}
library(readr)
stations <- as.data.frame(read_csv("~/DivvyChicago/data/Divvy_Stations_2017_Q1Q2.csv"))
```

Order the stations by capacity and set up quartile ranges.

```{r, eval=FALSE}
x <- stations$dpcapacity
summary(x)
table(x)
quantile(x,seq(0,1,0.1))
```

What are the largest Divvy Stations? We will assign names to them for further analysis.

```{r, eval=FALSE}
subset(stations,dpcapacity >= 40)
```

Showing the top 10 stations also gives an idea of the data.

```{r, eval=FALSE}
rows     <- order(stations$dpcapacity, decreasing = TRUE)
stations <- stations[rows,]
head(stations, n = 10)
```

## Quickly accessing stations in the table by their name

It is often useful to access rows of a table by their name instead of
using a number. This can be done by setting the row names in the data
frame.

```{r, eval=FALSE}
field_museum <- "Field Museum"
union_station <- "Canal St & Adams St"
maggie_daley_park <- "Columbus Dr & Randolph St"
navy_pier <- "Streeter Dr & Grand Ave"
millennium_park <- "Michigan Ave & Washington St"
```

Add row names (replacing the assigned ID):

```{r, eval=FALSE}
rownames(stations) <- stations$name
stations$name      <- NULL
head(stations)
```

Now show how you can reference a specific station.

```{r}
stations[field_museum,]
```

## Save your session

This is a good time to save your current R environment just in case
you accidentally quit or lose your connection to the cluster.

```{r, eval=FALSE}
save.image(file = "divvy.RData")
```







